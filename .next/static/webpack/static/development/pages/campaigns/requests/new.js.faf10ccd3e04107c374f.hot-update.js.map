{"version":3,"file":"static/webpack/static/development/pages/campaigns/requests/new.js.faf10ccd3e04107c374f.hot-update.js","sources":["webpack:///./pages/campaigns/requests/new.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Form, Button, Message, Input } from 'semantic-ui-react';\nimport Campaign from '../../../ethereum/campaign';\nimport web3 from '../../../ethereum/web3';\nimport { Link, Router } from '../../../routes';\nimport Layout from '../../../components/Layout';\n\nclass RequestNew extends Component {\n    state = {\n        value: '',\n        description: '',\n        recepient: '',\n        loading: false,\n        errorMessage: ''\n    };\n\n    static async getInitialProps(props) {\n        const { address } = props.query;\n\n        return { address }\n    }\n\n    onSubmit = async event => {\n        event.preventDefault()\n\n        const campaign = Campaign(this.props.address)\n        const { description, value, recipient } = this.state;\n\n        this.setState({loading:true, errorMessage: ''})\n\n        try {\n            const accounts = await web3.eth.getAccounts();\n            await campaign.methods.createRequest(\n                description,\n                web3.utils.toWei(value, 'ether'),\n                recipient\n            ).send({ from: accounts[0] });\n\n            Router.pushRoute(`/campaigns/${this.props.address}/requests`);\n        } catch (err) {\n            this.setState({errorMessage: err.message });\n        }\n\n        this.setState({loading: false});\n    };\n\n    render() {\n        return (\n            <Layout>\n                <Link route={`/campaigns/${this.props.address}/requests/`}>\n                    <a>\n                        Back\n                    </a>\n                </Link>\n                <h3>Create a Request</h3>\n                <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\n                    <Form.Field>\n                        <label>Description</label>\n                        <Input\n                            value={this.state.description}\n                            onChange={event => this.setState({description: event.target.value})}\n                        />\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Value in Ether</label>\n                        <Input\n                            value={this.state.value}\n                            onChange={event => this.setState({ value: event.target.value })}\n                        />\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Recepient</label>\n                        <Input\n                            value={this.state.recipient}\n                            onChange={event => this.setState({ recipient: event.target.value })}\n                        />\n                    </Form.Field>\n                    <Message error header={\"Oops!\"} content={this.state.errorMessage}/>\n                    <Button primary loading={this.state.loading}>Create!</Button>\n                </Form>\n            </Layout>\n        )\n    }\n}\n\nexport default RequestNew;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;;;;;;AAaA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AAHA;AACA;AAKA;AAAA;AAAA;AAAA;AACA;AAPA;AAAA;AAAA;AACA;AADA;AASA;AATA;AAAA;AAcA;AAAA;AACA;AAfA;AAgBA;AAhBA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAiBA;AAAA;AAAA;AACA;AAnBA;AAqBA;AAAA;AAAA;AACA;AAtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAuBA;AAAA;AACA;AAAA;AAEA;AAAA;AAMA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAQA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAQA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAKA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAIA;;;;;;AAlEA;;;;;;AACA;AAEA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAbA;AACA;AA6EA;;;;A","sourceRoot":""}